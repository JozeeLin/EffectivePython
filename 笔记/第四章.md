# 第4章 元类及属性

> 简单来说,就是我们可以把python的class语句转译为元类,并令其在每次定义具体的类时,都提供独特的行为.
>
> python还有另外一个奇妙的特性,那就是可以动态的定义对属性的访问操作.把这种动态属性机制与python的面向对象机制相结合,就可以非常顺利地将简单的类逐渐变换为复杂的类.

## 第29条:用纯属性取代get和set方法

```python
class Resistor(object):
    def __init__(self, ohms):
        self.ohms = ohms
        self.voltage = 0
        self.current = 0
r1 = Resistor(50e3)
r1.ohms = 10e3

class VoltageResistance(Resistor):
    def __init__(self, ohms):
        super().__init__(ohms)
        self._voltage = 0
        
	@property
	def voltage(self):
    	return self._voltage

	@voltage.setter
	def voltage(self, voltage):
    	self._voltage = voltage
   		self.current = self._voltage/self.ohms
    
r2 = VoltageResistance(1e3)
print('Before: %5r amps' % r2.current)
r2.voltage = 10
print('After: %5r amps' % r2.current)

'''
为属性指定setter方法,也可以在方法里面做类型验证及数值验证.
'''
class BoundedResistance(Resistor):
    def __init__(self, ohms):
        super().__init__(ohms)
        
    @property
    def ohms(self):
        return self._ohms
    
    @ohms.setter
    def ohms(self, ohms):
        if ohms<=0:
            raise ValueError('%f ohms must be > 0' % ohms)
        self._ohms = ohms
```



